# Agent Assignments: 004 - Remove SpecKit Commands & Transfer Content to Triad

**Feature ID**: 004
**Generated**: 2026-02-07
**Generated By**: team-lead
**Tasks Reference**: specs/004-remove-speckit-commands/tasks.md
**Total Tasks**: 88
**Estimated Waves**: 7 (including code review)
**Parallelization**: 60% of tasks parallelizable

---

## Feasibility Summary

| Dimension | Assessment |
|-----------|------------|
| **Effort** | Medium -- 88 tasks, but majority are mechanical (grep, copy, find-replace, delete) |
| **Capacity** | Single executing agent (orchestrator) sufficient; code-reviewer for final gate |
| **Timeline** | 1-2 sessions (optimistic: 1 session, realistic: 1.5 sessions, pessimistic: 2 sessions) |
| **Dependencies** | Linear phase chain with two parallelism opportunities (Phases 3+4, Phase 5 internals) |
| **Verdict** | **FEASIBLE** -- Confidence: HIGH |

---

## Agent Registry

| Agent | Role in This Feature |
|-------|---------------------|
| **orchestrator** | Primary executor -- coordinates all waves, performs file operations, runs validations |
| **code-reviewer** | Final quality gate -- reviews merged triad command files for correctness and consistency |
| **team-lead** | Governance -- wave sign-offs, blocker escalation (this document) |

### Agents NOT Assigned (with rationale)

| Agent | Reason for Exclusion |
|-------|---------------------|
| architect | No new architecture decisions; merges follow existing patterns from plan.md |
| product-manager | Requirements already signed off; no scope decisions during execution |
| senior-backend-engineer | No application code; all work is markdown file operations |
| frontend-developer | No frontend code |
| tester | No test suites; validation is grep/wc-based (handled by orchestrator) |
| devops | No deployment; no infrastructure changes |
| security-analyst | No security-sensitive changes |
| ux-ui-designer | No UI work |
| web-researcher | No external research needed |
| debugger | On standby for blocker resolution only |

---

## Wave Execution Strategy

### Wave 1: Reference Audit

**Goal**: Build comprehensive inventory of all speckit references to drive subsequent phases.

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T001 | Grep `/speckit.` references across repo | orchestrator | Yes | 1 min |
| T002 | Grep frontmatter markers (compatible_with_speckit) | orchestrator | Yes | 1 min |
| T003 | Grep "vanilla" terminology | orchestrator | Yes | 1 min |
| T004 | Categorize references into historical/active/command | orchestrator | No (depends on T001-T003) | 5 min |

**Parallelism**: T001 + T002 + T003 in parallel, then T004 sequential.
**Estimated Duration**: 7 minutes
**Output**: `specs/004-remove-speckit-commands/reference-audit.md`

**Quality Gate**: reference-audit.md exists with file-by-file inventory. All 142+ references across 39+ files accounted for. Historical exceptions clearly marked.

---

### Wave 2: Read All Source Files

**Goal**: Read and understand all 14 command files before any modifications.

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T005 | Read speckit.specify.md + triad.specify.md side by side | orchestrator | Yes | 2 min |
| T006 | Read speckit.plan.md + triad.plan.md side by side | orchestrator | Yes | 2 min |
| T007 | Read speckit.tasks.md + triad.tasks.md side by side | orchestrator | Yes | 2 min |
| T008 | Read speckit.implement.md + triad.implement.md side by side | orchestrator | Yes | 2 min |
| T009 | Read speckit.clarify.md, identify cross-references | orchestrator | Yes | 1 min |
| T010 | Read speckit.analyze.md, identify cross-references | orchestrator | Yes | 1 min |
| T011 | Read speckit.checklist.md, identify cross-references | orchestrator | Yes | 1 min |
| T012 | Read speckit.constitution.md, identify cross-references | orchestrator | Yes | 1 min |

**Parallelism**: All 8 tasks fully parallel (independent file reads).
**Estimated Duration**: 5 minutes (parallel ceiling: longest single read)
**Output**: Understanding of coupling points and merge strategy documented in orchestrator context.

**Quality Gate**: All 14 command files read. Coupling points for 4 core merges identified. Cross-reference update points documented for 4 new commands.

---

### Wave 3A: Create New Triad Commands (Phase 4) + Wave 3B: Specify Merge (Phase 3.1)

**Goal**: Start the two independent workstreams in parallel -- creating 4 new commands (copy + update) while beginning the first core merge.

**Wave 3A -- Create New Commands (Phase 4: T035-T047)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T035 | Copy speckit.clarify.md to triad.clarify.md | orchestrator | Yes | < 1 min |
| T036 | Update triad.clarify.md frontmatter | orchestrator | After T035 | 1 min |
| T037 | Replace speckit refs in triad.clarify.md | orchestrator | After T036 | 2 min |
| T038 | Copy speckit.analyze.md to triad.analyze.md | orchestrator | Yes | < 1 min |
| T039 | Update triad.analyze.md frontmatter | orchestrator | After T038 | 1 min |
| T040 | Replace speckit refs in triad.analyze.md | orchestrator | After T039 | 2 min |
| T041 | Copy speckit.checklist.md to triad.checklist.md | orchestrator | Yes | < 1 min |
| T042 | Update triad.checklist.md frontmatter | orchestrator | After T041 | 1 min |
| T043 | Replace speckit refs in triad.checklist.md | orchestrator | After T042 | 2 min |
| T044 | Copy speckit.constitution.md to triad.constitution.md | orchestrator | Yes | < 1 min |
| T045 | Update triad.constitution.md frontmatter | orchestrator | After T044 | 1 min |
| T046 | Replace speckit refs in triad.constitution.md | orchestrator | After T045 | 2 min |
| T047 | Validate zero speckit refs in all 4 new files | orchestrator | After T037,T040,T043,T046 | 1 min |

**Wave 3B -- Specify Merge (Phase 3.1: T013-T018)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T013 | Inline speckit.specify logic into triad.specify.md | orchestrator | No | 10 min |
| T014 | Remove speckit frontmatter from triad.specify.md | orchestrator | After T013 | 1 min |
| T015 | Update overview text in triad.specify.md | orchestrator | After T014 | 2 min |
| T016 | Replace all /speckit refs in triad.specify.md | orchestrator | After T015 | 2 min |
| T017 | Condense to stay under 420 lines | orchestrator | After T016 | 5 min |
| T018 | Verify under 500 lines with wc -l | orchestrator | After T017 | < 1 min |

**Parallelism**: Waves 3A and 3B run concurrently. Within 3A, the four copy chains (T035-T037, T038-T040, T041-T043, T044-T046) are parallel. Within 3B, tasks are sequential.
**Estimated Duration**: 20 minutes (bounded by 3B sequential merge)
**Output**: 4 new triad command files created; triad.specify.md merged and self-contained.

**Quality Gate**: All 4 new triad files exist with zero speckit references (T047 passes). triad.specify.md under 500 lines (T018 passes). No Skill tool invocations remain in triad.specify.md.

---

### Wave 4: Remaining Core Merges (Phase 3.2 - 3.4)

**Goal**: Complete the 3 remaining sequential merges following the pattern established in Wave 3B.

**Wave 4A -- Plan Merge (Phase 3.2: T019-T023)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T019 | Inline speckit.plan logic into triad.plan.md | orchestrator | No | 8 min |
| T020 | Remove speckit frontmatter from triad.plan.md | orchestrator | After T019 | 1 min |
| T021 | Update overview text in triad.plan.md | orchestrator | After T020 | 2 min |
| T022 | Replace all /speckit refs in triad.plan.md | orchestrator | After T021 | 2 min |
| T023 | Verify under 500 lines with wc -l | orchestrator | After T022 | < 1 min |

**Wave 4B -- Tasks Merge (Phase 3.3: T024-T028)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T024 | Inline speckit.tasks logic into triad.tasks.md | orchestrator | No | 8 min |
| T025 | Remove speckit frontmatter from triad.tasks.md | orchestrator | After T024 | 1 min |
| T026 | Update overview text in triad.tasks.md | orchestrator | After T025 | 2 min |
| T027 | Replace all /speckit refs in triad.tasks.md | orchestrator | After T026 | 2 min |
| T028 | Verify under 500 lines with wc -l | orchestrator | After T027 | < 1 min |

**Wave 4C -- Implement Merge (Phase 3.4: T029-T033)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T029 | Inline speckit.implement logic into triad.implement.md | orchestrator | No | 8 min |
| T030 | Remove speckit frontmatter from triad.implement.md | orchestrator | After T029 | 1 min |
| T031 | Update overview text in triad.implement.md | orchestrator | After T030 | 2 min |
| T032 | Replace all /speckit refs in triad.implement.md | orchestrator | After T031 | 2 min |
| T033 | Verify under 500 lines with wc -l | orchestrator | After T032 | < 1 min |

**Wave 4D -- Phase 3 Validation (T034)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T034 | Grep for remaining speckit/Skill tool refs in all 4 merged files | orchestrator | After 4A+4B+4C | 1 min |

**Parallelism**: Waves 4A, 4B, 4C are **sequential** (each merge informs the next for pattern consistency). 4D runs after all three complete.
**Estimated Duration**: 42 minutes
**Output**: All 4 triad core commands fully self-contained.

**Quality Gate**: All 4 merged files under 500 lines (T018, T023, T028, T033 pass). Zero Skill tool invocations remain (T034 passes). All internal references use /triad.* naming.

---

### Wave 5: Delete, Update References & Migration Guide (Phase 5.1 - 5.7)

**Goal**: Archive state, delete speckit files, update all references across the codebase, and create migration guide.

**Wave 5A -- Archive & Delete (T048-T057)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T048 | Create archive git tag v2.0.0-pre-speckit-removal | orchestrator | No | 1 min |
| T049 | Verify tag creation | orchestrator | After T048 | < 1 min |
| T050 | Delete speckit.specify.md | orchestrator | Yes (after T049) | < 1 min |
| T051 | Delete speckit.plan.md | orchestrator | Yes (after T049) | < 1 min |
| T052 | Delete speckit.tasks.md | orchestrator | Yes (after T049) | < 1 min |
| T053 | Delete speckit.implement.md | orchestrator | Yes (after T049) | < 1 min |
| T054 | Delete speckit.clarify.md | orchestrator | Yes (after T049) | < 1 min |
| T055 | Delete speckit.analyze.md | orchestrator | Yes (after T049) | < 1 min |
| T056 | Delete speckit.checklist.md | orchestrator | Yes (after T049) | < 1 min |
| T057 | Delete speckit.constitution.md | orchestrator | Yes (after T049) | < 1 min |

**Wave 5B -- Frontmatter Cleanup (T058-T061)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T058 | Remove speckit frontmatter from triad.prd.md | orchestrator | Yes | 1 min |
| T059 | Remove speckit frontmatter from triad.close-feature.md | orchestrator | Yes | 1 min |
| T060 | Remove speckit frontmatter from continue.md | orchestrator | Yes | 1 min |
| T061 | Remove speckit frontmatter from execute.md | orchestrator | Yes | 1 min |

**Wave 5C -- Core Doc + Rules + Skills Updates (T062-T071)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T062 | Update CLAUDE.md (remove Vanilla, update commands) | orchestrator | No (anchor doc) | 5 min |
| T063 | Update README.md (remove Vanilla commands) | orchestrator | Yes | 3 min |
| T064 | Update Makefile (replace speckit shortcuts) | orchestrator | Yes | 3 min |
| T065 | Update .claude/rules/commands.md (remove Vanilla section) | orchestrator | Yes | 3 min |
| T066 | Update .claude/rules/governance.md (replace speckit refs) | orchestrator | Yes | 2 min |
| T067 | Update .claude/rules/scope.md (replace Vanilla refs) | orchestrator | Yes | 2 min |
| T068 | Update speckit-validator SKILL.md | orchestrator | Yes | 2 min |
| T069 | Update architecture-validator SKILL.md | orchestrator | Yes | 1 min |
| T070 | Update prd-create skill.md | orchestrator | Yes | 1 min |
| T071 | Update product-manager.md agent | orchestrator | Yes | 2 min |

**Wave 5D -- Documentation Updates (T072-T080)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T072 | Update .specify/memory/constitution.md | orchestrator | Yes | 2 min |
| T073 | Update docs/SPEC_KIT_TRIAD.md | orchestrator | Yes | 3 min |
| T074 | Update docs/standards/PRODUCT_SPEC_ALIGNMENT.md (13 refs) | orchestrator | Yes | 3 min |
| T075 | Update docs/standards/TRIAD_COLLABORATION.md | orchestrator | Yes | 2 min |
| T076 | Update docs/product/02_PRD/INDEX.md | orchestrator | Yes | 1 min |
| T077 | Update docs/product/01_Product_Vision/README.md | orchestrator | Yes | 1 min |
| T078 | Update .claude/README.md (~24 refs) | orchestrator | Yes | 5 min |
| T079 | Update docs/devops/MIGRATION.md | orchestrator | Yes | 1 min |
| T080 | Update .claude/INFRASTRUCTURE_SETUP_SUMMARY.md (~10 refs) | orchestrator | Yes | 3 min |

**Wave 5E -- Migration Guide (T081)**

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T081 | Add v3.0.0 breaking change section to CHANGELOG.md | orchestrator | Yes (with 5C/5D) | 5 min |

**Parallelism**: 5A sequential (tag then delete). 5B fully parallel. 5C: T062 first (anchor), then T063-T071 parallel. 5D fully parallel. 5E parallel with 5C/5D. Sub-waves 5B through 5E can run after 5A completes.
**Estimated Duration**: 25 minutes
**Output**: Zero speckit files remain. All references updated. Migration guide in CHANGELOG.md.

**Quality Gate**: All 8 speckit command files deleted. All reference files updated. CHANGELOG.md contains v3.0.0 migration section.

---

### Wave 6: Final Validation (Phase 5.8)

**Goal**: Comprehensive validation that the entire migration is complete and correct.

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| T082 | Verify zero speckit.*.md files in .claude/commands/ | orchestrator | Yes | < 1 min |
| T083 | Grep /speckit. across codebase, verify zero active results | orchestrator | Yes | 1 min |
| T084 | Verify exactly 10 triad.*.md files exist | orchestrator | Yes | < 1 min |
| T085 | Verify all merged commands under 500 lines | orchestrator | Yes | < 1 min |
| T086 | Grep for leftover frontmatter markers | orchestrator | Yes | < 1 min |
| T087 | Grep for "vanilla commands" in active docs | orchestrator | Yes | < 1 min |
| T088 | Verify 4 new commands listed in CLAUDE.md and commands.md | orchestrator | Yes | 1 min |

**Parallelism**: All 7 validation tasks fully parallel.
**Estimated Duration**: 2 minutes
**Output**: Validation report confirming zero violations.

**Quality Gate**: All 7 checks pass with zero violations. Exceptions limited to historical files (CHANGELOG.md, specs/004-*, PRD 004, specs/001-003).

---

### Wave 7: Code Review of Merged Files

**Goal**: Human-readable quality review of the 4 merged triad command files and 4 new triad command files.

| Task | Description | Agent | Parallel | Est. Time |
|------|-------------|-------|----------|-----------|
| CR-1 | Review triad.specify.md merged content for correctness, completeness, and readability | code-reviewer | Yes | 5 min |
| CR-2 | Review triad.plan.md merged content | code-reviewer | Yes | 5 min |
| CR-3 | Review triad.tasks.md merged content | code-reviewer | Yes | 5 min |
| CR-4 | Review triad.implement.md merged content | code-reviewer | Yes | 5 min |
| CR-5 | Review triad.clarify.md for correct reference updates | code-reviewer | Yes | 3 min |
| CR-6 | Review triad.analyze.md for correct reference updates | code-reviewer | Yes | 3 min |
| CR-7 | Review triad.checklist.md for correct reference updates | code-reviewer | Yes | 3 min |
| CR-8 | Review triad.constitution.md for correct reference updates | code-reviewer | Yes | 3 min |

**Parallelism**: All 8 reviews parallelizable (different files).
**Estimated Duration**: 10 minutes (parallel execution)
**Output**: Code review report with findings.

**Quality Gate**: No critical or high-severity findings. All merged files preserve original functionality. No orphaned references or broken cross-links.

---

## Agent Assignment Matrix

| Agent | Tasks Assigned | Task Count | Load % |
|-------|---------------|------------|--------|
| **orchestrator** | T001-T088 (all execution) | 88 | 100% during Waves 1-6 |
| **code-reviewer** | CR-1 through CR-8 | 8 | 100% during Wave 7 only |
| **team-lead** | Wave sign-offs, blocker escalation | 7 sign-offs | Governance checkpoints only |

**Note**: Because this feature involves only markdown file operations (no application code, no tests, no deployment), a single executing agent (orchestrator) is the correct assignment. Adding more specialized agents would increase coordination overhead without benefit. The code-reviewer is brought in at Wave 7 specifically for merged-file quality assurance.

---

## Timeline Summary

| Wave | Phase | Tasks | Duration (est.) | Cumulative |
|------|-------|-------|-----------------|------------|
| Wave 1 | Audit | T001-T004 (4) | 7 min | 7 min |
| Wave 2 | Read Sources | T005-T012 (8) | 5 min | 12 min |
| Wave 3 | Specify Merge + New Commands | T013-T018, T035-T047 (19) | 20 min | 32 min |
| Wave 4 | Plan + Tasks + Implement Merges | T019-T034 (16) | 42 min | 74 min |
| Wave 5 | Delete + Update + Migration | T048-T081 (34) | 25 min | 99 min |
| Wave 6 | Final Validation | T082-T088 (7) | 2 min | 101 min |
| Wave 7 | Code Review | CR-1 to CR-8 (8) | 10 min | 111 min |
| **Total** | | **96 items** | **~111 min** | **~2 hours** |

**Optimistic**: 75 minutes (if merges go smoothly, minimal condensing needed)
**Realistic**: 111 minutes (~2 hours)
**Pessimistic**: 150 minutes (~2.5 hours, if merge condensing requires multiple iterations)

---

## Risk Mitigations

| Risk | Mitigation | Owner |
|------|-----------|-------|
| Merged file exceeds 500 lines | Condense task (T017) budgets extra time; pattern from first merge guides subsequent | orchestrator |
| Speckit reference missed in cleanup | T083 full-repo grep catches any survivor; reference-audit.md provides checklist | orchestrator |
| Merge loses functionality | Wave 7 code review catches logic gaps; archive tag enables rollback | code-reviewer |
| Phase 5 updates create inconsistency | T062 (CLAUDE.md) done first as anchor; all other docs reference it | orchestrator |

---

## Handoff to Orchestrator

**Status**: APPROVED for execution
**Tasks location**: `specs/004-remove-speckit-commands/tasks.md`
**Wave strategy**: 7 waves as defined above
**Agent assignments**: orchestrator (Waves 1-6), code-reviewer (Wave 7)
**Sign-off checkpoints**: After each wave quality gate
**Escalation path**: team-lead for blockers; debugger agent on standby

---

*Generated by team-lead agent | Feature 004 | 2026-02-07*
